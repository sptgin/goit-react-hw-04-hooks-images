(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{115:function(e,t,a){"use strict";a.r(t);var c=a(1),n=a.n(c),r=a(14),s=a.n(r),i=(a(44),a(4)),o=a(18),u=a(17),h=a.n(u),l=a(34),j=a(35),m=a(36),b=a(37),p=a.n(b),d=function(){function e(){Object(j.a)(this,e),this.api_key="5018958-ed49ccd90878e6614abdf24a6",this.api_url="https://pixabay.com/api/",this.api_type="image_type=photo",this.api_orientation="orientation=horizontal",this._searchQuery="",this._page=1}return Object(m.a)(e,[{key:"searchQuery",get:function(){return this._searchQuery},set:function(e){return this._searchQuery=e}},{key:"page",get:function(){return this._page},set:function(e){return this._page+=e}},{key:"resetPage",value:function(){return this._page=1}},{key:"search",value:function(){var e=Object(l.a)(h.a.mark((function e(){var t,a,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(this.api_url,"?").concat(this.api_type,"&").concat(this.api_orientation,"&q=").concat(this.searchQuery,"&page=").concat(this._page,"&per_page=12&key=").concat(this.api_key,"\n"),e.prev=1,e.next=4,p.a.get(t);case 4:return a=e.sent,c=a.data,e.abrupt("return",c);case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",e.t0.message);case 12:case"end":return e.stop()}}),e,this,[[1,9]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),f=a(0);function g(e){var t=e.item,a=e.handleImageClick,c=t.webformatURL,n=t.largeImageURL,r=t.tags;return Object(f.jsx)("li",{className:"ImageGalleryItem",children:Object(f.jsx)("img",{src:c,alt:r,onClick:function(){return a(n)},className:"ImageGalleryItem-image"})})}var O=document.querySelector("#modal");function y(e){var t=e.largeImageURL,a=e.onModalClose;Object(c.useEffect)((function(){return window.addEventListener("keydown",n),function(){window.removeEventListener("keydown",n)}}));var n=function(e){"Escape"===e.code&&a()};return Object(r.createPortal)(Object(f.jsx)("div",{className:"Overlay",onClick:function(e){e.target===e.currentTarget&&a()},children:Object(f.jsx)("div",{className:"Modal",children:Object(f.jsx)("img",{src:t,alt:""})})}),O)}var v=a(38),x=a.n(v);var S=function(){return Object(f.jsx)(x.a,{className:"SpinnerLoader",type:"Watch",color:"#303f9f",height:100,width:100,timeout:3e3})};var k=function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})},w=a(39),_=new d;function N(e){var t=e.searchQuery,a=Object(c.useState)([]),n=Object(i.a)(a,2),r=n[0],s=n[1],u=Object(c.useState)(null),h=Object(i.a)(u,2),l=h[0],j=h[1],m=Object(c.useState)("init"),b=Object(i.a)(m,2),p=b[0],d=b[1],O=Object(c.useState)(""),v=Object(i.a)(O,2),x=v[0],N=v[1],I=Object(c.useState)(""),E=Object(i.a)(I,2),C=E[0],Q=E[1];Object(c.useEffect)((function(){""!==t&&(d("pending"),_.resetPage(),_.searchQuery=t,_.search().then((function(e){e.hits.length>0?(s(e.hits),j(e.total),d("success")):(d("error"),Q("No images found ..."))})))}),[t]);var L=function(e){N(e),d("showmodal")};return"init"===p?Object(f.jsx)("h1",{className:"title"}):"pending"===p?Object(f.jsx)(S,{}):"success"===p?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("ul",{className:"ImageGallery",children:r.map((function(e){return Object(f.jsx)(g,{item:e,handleImageClick:L},e.id)}))}),l>12&&Object(f.jsx)("button",{className:"Button",type:"button",id:"more",onClick:function(e){_.page=1,_.search().then((function(e){s((function(t){return[].concat(Object(o.a)(t),Object(o.a)(e.hits))})),d("success"),k()})).catch((function(e){d("error"),Q(e)}))},children:"load more"})]}):"showmodal"===p?Object(f.jsx)(y,{largeImageURL:x,onModalClose:function(){d("success")}}):"error"===p?Object(f.jsx)(w.Notification,{type:"Error",title:"Error",text:C}):void 0}function I(e){var t=e.onSubmit,a=Object(c.useState)(""),n=Object(i.a)(a,2),r=n[0],s=n[1];return Object(f.jsx)("header",{className:"Searchbar",children:Object(f.jsxs)("form",{className:"SearchForm",onSubmit:function(e){e.preventDefault(),""!==r.trim()?(t(r),s("")):alert("Please, enter some for search image ... ")},children:[Object(f.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(f.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(f.jsx)("input",{className:"SearchForm-input",value:r,type:"search",placeholder:"Search images and photos",onChange:function(e){s(e.target.value)}})]})})}function E(){var e=Object(c.useState)(""),t=Object(i.a)(e,2),a=t[0],n=t[1];return Object(f.jsxs)("div",{className:"App",children:[Object(f.jsx)(I,{onSubmit:function(e){n(e)}}),Object(f.jsx)(N,{searchQuery:a})]})}s.a.render(Object(f.jsx)(n.a.StrictMode,{children:Object(f.jsx)(E,{})}),document.getElementById("root"))},44:function(e,t,a){}},[[115,1,2]]]);
//# sourceMappingURL=main.28bf8e51.chunk.js.map